array functions that work with promises